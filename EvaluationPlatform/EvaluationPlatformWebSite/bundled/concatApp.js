var app=angular.module("app",["ngRoute","toastr","ngAnimate","ui.bootstrap","LocalStorageModule","angular-loading-bar","ngTouch","ngFileUpload","app.customDirectives","app.home","app.classes","app.login","app.account","app.index","app.student","app.evaluationTemplate","app.evaluation","app.dashboard","app.teacher","app.course","app.studyPlan","app.schoolyear"]);angular.module("app.account",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/manageAccount",{templateUrl:"app/Account/views/manageAccount.html",controller:"manageAccountController"})}]),angular.module("app.classes",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/classes",{templateUrl:"app/classes/views/classes.html",controller:"classesController",resolve:{classes:["classesService",function(e){return e.classesForTeacher().then(function(e){return e})}]}}),e.when("/manageClasses",{templateUrl:"app/classes/views/manageClasses.html",controller:"manageClassesController",resolve:{allClasses:["classesService",function(e){return e.allClasses().then(function(e){return e})}]}}),e.when("/createClass",{templateUrl:"app/classes/views/createClass.html",controller:"createClassController"})}]),angular.module("app.course",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/manageCourse",{templateUrl:"app/Course/views/manageCourse.html",controller:"manageCourseController",resolve:{courses:["courseService",function(e){return e.allCourses().then(function(e){return e})}]}}),e.when("/courses",{templateUrl:"app/Course/views/courses.html",controller:"courseController",resolve:{courses:["courseService",function(e){return e.getCourses().then(function(e){return e})}]}}),e.when("/createCourse",{templateUrl:"app/Course/views/createCourse.html",controller:"createCourseController"})}]),angular.module("app.customDirectives",["ngRoute"]).config(function(){"use strict"}),angular.module("app.evaluation",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/evaluation/:bundleId?",{templateUrl:"app/evaluation/views/evaluation.html",controller:"evaluationController",resolve:{evaluations:["evaluationService","$route",function(e,t){var n=t.current.params.bundleId;return e.evaluationsForBundle(n).then(function(e){return e})}]}}),e.when("/searchEvaluationForClass",{templateUrl:"app/evaluation/views/searchEvaluationForClass.html",controller:"searchEvaluationForClassController",resolve:{classes:["classesService",function(e){return e.classesForTeacher().then(function(e){return e})}],courses:["courseService",function(e){return e.getCourses().then(function(e){return e})}]}}),e.when("/searchEvaluationsForStudent",{templateUrl:"app/evaluation/views/searchEvaluationsForStudent.html",controller:"searchEvaluationsForStudentController",resolve:{classes:["classesService",function(e){return e.classesForTeacher().then(function(e){return e})}],courses:["courseService",function(e){return e.getCourses().then(function(e){return e})}]}})}]),angular.module("app.dashboard",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/dashboard",{templateUrl:"app/dashboard/views/dashboard.html",controller:"dashboardController"})}]),angular.module("app.home",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/",{templateUrl:"app/home/views/home.html",controller:"homeController"}).when("/home",{templateUrl:"app/home/views/home.html",controller:"homeController"}).otherwise({redirectTo:"/"})}]),angular.module("app.evaluationTemplate",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/createEvaluationTemplate",{templateUrl:"app/evaluationTemplate/views/createEvaluationTemplate.html",controller:"createEvaluationTemplateController",resolve:{createEvaluationOptions:["evaluationTemplateService",function(e){return e.getCreateEvaluationOptions()}]}}),e.when("/evaluationTemplates",{templateUrl:"app/evaluationTemplate/views/evaluationTemplates.html",controller:"evaluationTemplatesController",resolve:{evaluationTemplates:["evaluationTemplateService",function(e){return e.getEvaluationTemplates()}]}})}]),angular.module("app.index",["ngRoute"]).config(["$routeProvider",function(e){"use strict"}]),angular.module("app.login",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/login",{templateUrl:"app/login/views/login.html",controller:"loginController"})}]),app.run(["authenticationService",function(e){e.getAuthData()}]),app.config(["$httpProvider",function(e){e.interceptors.push("authInterceptorFactory")}]),angular.module("app.schoolyear",["ngRoute"]).config(["$routeProvider",function(e){"use strict"}]),angular.module("app.student",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/createStudent",{templateUrl:"app/Student/views/createStudent.html",controller:"createStudentController"})}]),angular.module("app.studyPlan",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/manageStudyPlan",{templateUrl:"app/StudyPlan/views/manageStudyPlan.html",controller:"manageStudyPlanController"})}]),angular.module("app.teacher",["ngRoute"]).config(["$routeProvider",function(e){"use strict";e.when("/manageTeacher",{templateUrl:"app/Teacher/views/manageTeacher.html",controller:"manageTeacherController",resolve:{teachers:["teacherService",function(e){return e.getTeachers().then(function(e){return e})}]}})}]),app.config(["toastrConfig",function(e){"use strict";angular.extend(e,{autoDismiss:!0,containerId:"toast-container",maxOpened:10,newestOnTop:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body",allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!1,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:4e3,titleClass:"toast-title",toastClass:"toast"})}]),app.config(["$provide","$httpProvider",function(e,t){e.factory("errorInterceptor",["$q","$injector",function(e,t){return{responseError:function(n){var o=t.get("messageService");return o.handleReject(n),e.reject(n)}}}]),t.interceptors.push("errorInterceptor")}]),function(e){"use strict";function t(e,t,n,o,a){e.setAccountRole=function(t){e.createAccountInfo.roleType=t},e.ok=function(){t.createAccount(e.createAccountInfo).then(function(){a.handleSucces("Account aangemaakt!"),o.dismiss()})},e.cancel=function(){o.dismiss("cancel")};var l=function(){e.createAccountInfo={},e.createAccountInfo.roleType="UserRole",e.createAccountInfo.isTeacher=!0};l()}t.$inject=["$scope","accountService","$location","$uibModalInstance","messageService"],e.controller("createAccountModalController",t)}(angular.module("app.account")),function(e){"use strict";function t(e,t,n,o){e.selectedRow=null,e.setSelectedAccount=function(t,n){e.setSelectedAccount=t,e.selectedRow=n},e.createAccountInfo=function(){o.open({animation:!0,templateUrl:"app/Account/views/createAccountModal.html",controller:"createAccountModalController",size:"lg",resolve:{}})};var a=function(){n.getAccounts().then(function(t){e.accountList=t})};a()}t.$inject=["$scope","$location","accountService","$uibModal"],e.controller("manageAccountController",t)}(angular.module("app.account")),function(e){function t(e,t){var n=this,o=t.baseApiPath;n.getAccounts=function(){return e.get(o+"accounts/getAccounts").then(function(e){return e.data})},n.createAccount=function(t){return e.post(o+"accounts/createAccount",t).then(function(e){return e.data})}}t.$inject=["$http","configurationService"],e.service("accountService",t)}(angular.module("app.account")),function(e){"use strict";function t(e,t,n){var o=function(){e.classes=n,console.log(n)};o()}t.$inject=["$scope","$location","classes"],e.controller("classesController",t)}(angular.module("app.classes")),function(e){"use strict";function t(e,t,n,o,a){e.selectedTeacher=null,e.selectedCourses=[],e.cancel=function(){t.path("/manageClasses")},e.ok=function(){console.log(e.selectedCourses),n.createClass(e.createClassInfo).then(function(){o.handleSucces("Klas aangemaakt!"),t.path("/manageClasses")})};var l=function(){e.createClassInfo={},e.createClassInfo.nextYear=!1,a.allCourses().then(function(t){e.courses=t,console.log(e.courses)})};l()}t.$inject=["$scope","$location","classesService","messageService","courseService"],e.controller("createClassController",t)}(angular.module("app.classes")),function(e){"use strict";function t(e,t,n,o,a,l){e.fileUpdated=function(t,n){e.file=n.target.files[0]},e.uploadCsv=function(){t.uploadClassCsv(e.file,e.selectedSchoolYear).then(function(e){o.success("Het CSV bestand is met success opgeslagen.")})},e.selectedRow=null,e.setSelectedClass=function(t,n){e.selectedClass=t,e.selectedRow=n};var r=function(){n.getFutureSchoolYears().then(function(t){e.schoolYears=t,e.selectedSchoolYear=t[0]}),e.allClasses=l,console.log(e.allClasses)};r()}t.$inject=["$scope","classesService","schoolyearService","toastr","$location","allClasses"],e.controller("manageClassesController",t)}(angular.module("app.classes")),function(e){"use strict";function t(e,t,n,o){e.selectedRow=null,e.setSelectedClass=function(t,n){e.selectedClass=t,e.selectedRow=n},e.ok=function(){angular.isUndefined(e.selectedClass)||n.close(e.selectedClass)},e.cancel=function(){n.dismiss("cancel")};var a=function(){e.classes=o,console.log(o)};a()}t.$inject=["$scope","$location","$uibModalInstance","classes"],e.controller("selectClassModalController",t)}(angular.module("app.classes")),function(e){function t(e,t){var n=function(){t.getTestClass().then(function(t){e.testClass=t})};n()}t.$inject=["$scope","classesService"],e.controller("TestClassController",t)}(angular.module("app.classes")),function(e){"use strict";function t(e,t,n){var o=this,a=t.baseApiPath;o.classesForTeacher=function(){return e.get(a+"class/classesForTeacher").then(function(e){return e.data})},o.classesForCourse=function(t){return e.post(a+"class/classesForCourse",{id:t}).then(function(e){return e.data})},o.availableClassesForTeacher=function(t){return e.post(a+"class/availableClassesForTeacher",{id:t}).then(function(e){return e.data})},o.uploadClassCsv=function(e,t){return n.upload({url:a+"class/uploadClassCsv/"+t.id,data:{file:e}}).then(function(e){},function(e){console.log("Error status: "+e.status)},function(e){parseInt(100*e.loaded/e.total)})},o.allClasses=function(){return e.get(a+"class/allClasses").then(function(e){return e.data})},o.createClass=function(t){return e.post(a+"class/createClass",t).then(function(e){return e.data})}}t.$inject=["$http","configurationService","Upload"],e.service("classesService",t)}(angular.module("app.classes")),function(e){"use strict";function t(e,t){var n=this,o="http://api.evaluationplatform.bearit.be/";n.baseApiPath=o+"api/",n.tokenPath=o+"oauth/token",n.getSchoolYears=function(){return e.get(n.baseApiPath+"/generalInfo/getschoolyears").then(function(e){return e.data})},this.handlePdfData=function(e){var t=new Blob([e],{type:"application/pdf"});return window.navigator.msSaveOrOpenBlob?navigator.msSaveBlob(t,"fileName.pdf"):saveAs(t,"filename.pdf"),e}}t.$inject=["$http","toastrConfig"],e.service("configurationService",t)}(angular.module("app")),function(e){"use strict";function t(e,t,n){var o=function(){e.courses=n,console.log(e.courses)};o()}t.$inject=["$scope","$location","courses"],e.controller("courseController",t)}(angular.module("app.course")),function(e){"use strict";function t(e,t,n,o,a,l,r){e.createCourseInfo={},e.studyplans=[],e.cancel=function(){t.path("/manageCourse")},e.ok=function(){n.createCourse(e.createCourseInfo).then(function(){l.handleSucces("Cursus aangemaakt!"),t.path("/manageCourse")}),console.log(e.createCourseInfo)},e.setSelectedSchoolYear=function(t){e.createCourseInfo.schoolYear=t};var c=function(){e.createCourseInfo={},r.getFutureSchoolYears().then(function(t){e.schoolYears=t,e.createCourseInfo.schoolYear=e.schoolYears[0]}),a.getStudyPlans().then(function(t){e.studyplans=t})};c()}t.$inject=["$scope","$location","courseService","$uibModal","studyPlanService","messageService","schoolyearService"],e.controller("createCourseController",t)}(angular.module("app.course")),function(e){"use strict";function t(e,t,n){e.selectedRow=null,e.setSelectedCourse=function(t,n){e.selectedCourse=t,e.selectedRow=n};var o=function(){e.courses=n,console.log(e.courses)};o()}t.$inject=["$scope","$location","courses"],e.controller("manageCourseController",t)}(angular.module("app.course")),function(e){function t(e,t){var n=this,o=t.baseApiPath;n.getCourses=function(){return e.get(o+"courses/coursesForTeacher").then(function(e){return e.data})},n.allCourses=function(){return e.get(o+"courses/allCourses").then(function(e){return e.data})},n.createCourse=function(t){return e.post(o+"courses/createCourse",t).then(function(e){return e.data})};var a=function(){};a()}t.$inject=["$http","configurationService"],e.service("courseService",t)}(angular.module("app.course")),function(e){"use strict";function t(e){return{restrict:"E",template:"<a class='btn btn-default' ><i class='fa fa-plus-square'></i></a>",scope:{modalname:"@",items:"=",selection:"="},link:function(t,n){n.bind("click",function(){e.openModal(t.modalname,t.items).then(function(e){t.selection=e})})}}}t.$inject=["selectModalService"],e.directive("selectModal",t)}(angular.module("app.customDirectives")),function(e){"use strict";function t(e){var t=this,n=[{modalName:"selectTeacherModal",template:"app/customDirectives/selectModalDirective/teacher/selectTeacherModal.html",controller:"selectItemModalController",content:{title:"Leerkrachten",itemDescription:"Selecteer een leerkracht"}},{modalName:"selectTeachersModal",template:"app/customDirectives/selectModalDirective/teacher/selectTeachersModal.html",controller:"selectItemsModalController",content:{title:"Leerkrachten",itemDescription:"Selecteer leerkrachten"}},{modalName:"selectStudyplanModal",template:"app/customDirectives/selectModalDirective/studyplan/selectStudyplanModal.html",controller:"selectItemModalController",content:{title:"Leerplannen",itemDescription:"Selecteer een leerplan"}},{modalName:"selectCoursesModal",template:"app/customDirectives/selectModalDirective/courses/selectCoursesModal.html",controller:"selectItemsModalController",content:{title:"Cursussen",itemDescription:"Selecteer cursussen"}}],o=function(e){var t=_.find(n,function(t){return t.modalName.toLowerCase()===e.toLowerCase()});return null==t&&console.log("Geen modal setting gevonden"),t};t.openModal=function(t,n){var a=o(t),l=e.open({animation:!0,templateUrl:a.template,controller:a.controller,size:"lg",resolve:{items:function(){return n},content:function(){return a.content}}});return l.result.then(function(e){return e})}}t.$inject=["$uibModal"],e.service("selectModalService",t)}(angular.module("app.customDirectives")),function(e){"use strict";function t(e,t){var n=function(e,t){e.schoolyears=t,e.selected=e.schoolyears[0]};return{restrict:"E",template:'<label for="schoolyearSelector" class="control-label">Schooljaar:</label><div id="schoolyearSelector" class="btn btn-default" uib-dropdown uib-dropdown-toggle><a class="btn-default" >{{selected.notation}} <i class="fa fa-caret-down"></i></a><ul uib-dropdown-menu role="menu" aria-labelledby="single-button"><li ng-repeat="schoolyear in schoolyears | orderBy:\'startYear\'"role="menuitem" ng-click="setSelectedSchoolYear(schoolyear)"><a>{{schoolyear.notation}}</a></li></ul></div>',scope:{selected:"=",schoolyears:"="},link:function(o,a,l){angular.isUndefined(e.futureSchoolYears)||null==e.futureSchoolYears?t.getFutureSchoolYears().then(function(e){n(o,e)}):n(o,e.futureSchoolYears),o.setSelectedSchoolYear=function(e){o.selected=e}}}}t.$inject=["$rootScope","schoolyearService"],e.directive("selectSchoolyear",t)}(angular.module("app.customDirectives")),function(e){"use strict";function t(e,t,n,o){var a=this;e.selectEvaluation=function(t){e.selectedEvaluation=t,console.log(e.selectedEvaluation)},e.setScore=function(e,t){e.score=t,e.notScoredReason=0},e.updateEvaluation=function(){n.updateEvaluation(e.selectedEvaluation).then(function(t){var n=_.findIndex(e.evaluations,function(e){return e.id===t.id});e.evaluations[n]=t,a.updateAfterChange()})},e.updateEvaluations=function(){n.updateEvaluations(e.evaluations).then(function(t){e.evaluations=t,a.updateAfterChange()})},e.setNotScoredReason=function(e,t){e.notScoredReason=t,e.score=null},a.updateAfterChange=function(){e.evaluations=n.mapItemsToSubSection(e.evaluations)};var l=function(){console.log(o[0]),e.classTitle=o[0].createdForClass.description,e.selectEvaluation(o[0]),e.evaluations=n.mapItemsToSubSection(o),console.log(e.evaluations)};l()}t.$inject=["$scope","$location","evaluationService","evaluations"],e.controller("evaluationController",t)}(angular.module("app.evaluation")),function(e){"use strict";function t(e,t,n,o){var a=function(){return _.map(e.evaluations,function(e){return e.selected===!0?e.id:void 0})};e.checkAll=function(){e.selectedAll?e.selectedAll=!0:e.selectedAll=!1,angular.forEach(e.evaluations,function(t){t.selected=e.selectedAll})},e.ok=function(){o.close(a())},e.cancel=function(){o.dismiss("cancel")};var l=function(){e.evaluations=n};l()}t.$inject=["$scope","$location","evaluations","$uibModalInstance"],e.controller("evaluationsToPdfModalController",t)}(angular.module("app.evaluation")),function(e){"use strict";function t(e,t,n,o,a){e.ok=function(){a.close()},e.cancel=function(){a.dismiss("cancel")},e.evaluationToPdf=function(){o.createPdfForEvaluation(e.evaluation),e.ok()};var l=function(){e.evaluation=n,o.mapSubsectionToEvaluation(n),console.log(n)};l()}t.$inject=["$scope","$location","evaluation","evaluationService","$uibModalInstance"],e.controller("scoredEvaluationModalController",t)}(angular.module("app.evaluation")),function(e){"use strict";function t(e,t,n,o,a,l,r,c,s){e.queryObject={},e.setClass=function(t){e.selectedClass=t,e.queryObject.classId=e.selectedClass.id},e.setCourse=function(t){e.selectedCourse=t,e.queryObject.courseId=e.selectedCourse.id},e.clearSearch=function(){e.queryObject.startDate=null,e.queryObject.endDate=null,e.queryObject.classId=null,e.queryObject.courseId=null,e.queryObject.description=null,e.selectedClass=null,e.selectedCourse=null,e.showpagination=!1},e.search=function(){var t=a.validateEvaluationTotalsForClassOverViewQueryDto(e.queryObject);t!==!1&&a.searchEvaluationForClassTotalOverviews(e.queryObject).then(function(t){e.tableParams=a.transformEvaluationForClassOverviewsToTableParams(t),console.log(t)})},e.openScoredEvaluationModal=function(e){l.open({animation:!0,templateUrl:"app/evaluation/views/scoredEvaluationModal.html",controller:"scoredEvaluationModalController",size:"lg",resolve:{evaluation:e}})};var u=function(){e.courses=n,e.classes=o,e.clearSearch()};u()}t.$inject=["$scope","$location","courses","classes","evaluationService","$uibModal","$compile","$timeout","$templateCache"],e.controller("searchEvaluationForClassController",t)}(angular.module("app.evaluation")),function(e){"use strict";function t(e,t,n,o,a,l){e.evaluationsPagedQueryObject={},e.evaluations=[],e.setClass=function(t){e.selectedClass=t,e.evaluationsPagedQueryObject.classId=e.selectedClass.id},e.setCourse=function(t){e.selectedCourse=t,e.evaluationsPagedQueryObject.courseId=e.selectedCourse.id},e.clearSearch=function(){e.evaluationsPagedQueryObject.page=1,e.evaluationsPagedQueryObject.startDate=null,e.evaluationsPagedQueryObject.endDate=null,e.evaluationsPagedQueryObject.finished=null,e.evaluationsPagedQueryObject.classId=null,e.evaluationsPagedQueryObject.courseId=null,e.evaluationsPagedQueryObject.studentFirstname=null,e.evaluationsPagedQueryObject.studentLastname=null,e.selectedClass=null,e.selectedCourse=null,e.showpagination=!1},e.search=function(){a.searchEvaluations(e.evaluationsPagedQueryObject).then(function(t){e.evaluations=t.evaluations,e.totalItems=t.totalItems,e.showpagination=!0,console.log(e.evaluations)})},e.evaluationsToPdf=function(){var t=l.open({animation:!0,templateUrl:"app/evaluation/views/evaluationsToPdfModal.html",controller:"evaluationsToPdfModalController",size:"lg",resolve:{evaluations:function(){return e.evaluations}}});t.result.then(function(e){var t={};t.EvaluationIds=e,a.createPdfForEvaluations(t)},function(){})},e.openScoredEvaluationModal=function(e){l.open({animation:!0,templateUrl:"app/evaluation/views/scoredEvaluationModal.html",controller:"scoredEvaluationModalController",size:"lg",resolve:{evaluation:e}})};var r=function(){e.courses=n,e.classes=o,e.clearSearch()};r()}t.$inject=["$scope","$location","courses","classes","evaluationService","$uibModal"],e.controller("searchEvaluationsForStudentController",t)}(angular.module("app.evaluation")),function(e){function t(e,t,n,o){var a=this,l=t.baseApiPath;a.evaluationsForBundle=function(t){return e.post(l+"evaluation/evaluationsForBundle",{id:t}).then(function(e){return e.data})},a.updateEvaluation=function(t){return e.post(l+"evaluation/updateEvaluation",t).then(function(e){return e.data})},a.updateEvaluations=function(t){return e.post(l+"evaluation/updateEvaluations",t).then(function(e){return e.data})},a.searchEvaluations=function(t){return e.post(l+"evaluation/searchEvaluations",t).then(function(e){return e.data})},a.searchEvaluationForClassTotalOverviews=function(t){return e.post(l+"evaluation/searchEvaluationForClassTotalOverviews",t).then(function(e){return e.data})},a.createPdfForEvaluations=function(n){return e.post(l+"evaluation/createPdfForEvaluations",n,{responseType:"arraybuffer"}).then(function(e){return t.handlePdfData(e.data).then(function(e){return e})})},a.createPdfForEvaluation=function(e){var t={};return t.EvaluationIds=[e.id],a.createPdfForEvaluations(t)},a.plannedEvaluations=function(){return e.get(l+"evaluation/plannedEvaluations").then(function(e){return console.log("Planned Evaluations"),console.log(e.data),e.data})},a.transformEvaluationForClassOverviewsToTableParams=function(e){if(null==e||e.length<1)return void n.handleWarning("Geen evaluaties gevonden");var t={};return t.allEvaluations=e,t.resultsForStudents=[],_.each(e[0].createdForClass.students,function(n){var a={student:n,totals:[]};_.each(e,function(e){var t={total:"",generalComment:""},l=_.find(e.evalutionSummaries,function(e){return e.student.id===n.id});null!=l?(t.total=null!=l.result?o("number")(l.result.total,2):"",t.generalComment=null!=l.generalComment?l.generalComment:""):(t.total="",t.generalComment="Niet ingevuld"),a.totals.push(t)}),t.resultsForStudents.push(a)}),t},a.validateEvaluationTotalsForClassOverViewQueryDto=function(e){return angular.isUndefined(e.classId)||null==e.classId?(n.handleWarning("Je moet een klas selecteren om te kunnen zoeken."),!1):angular.isUndefined(e.courseId)||null==e.courseId?(n.handleWarning("Je moet een vak selecteren om te kunnen zoeken."),!1):!0};var r=function(){};r(),a.mapSubsectionToEvaluation=function(e){var t=_.groupBy(e.evaluationItems,function(e){return e.evaluationSubSection.description});t=_.sortBy(t,function(e){return e[0].evaluationSubSection.weight}),e.mappedSubsections=t,a.setSubsectionScores(e)},a.mapItemsToSubSection=function(e){return _.each(e,function(e){a.mapSubsectionToEvaluation(e)}),e},a.setSubsectionScores=function(e){_.each(e.mappedSubsections,function(t){if(angular.isDefined(e.result)&&null!==e.result){t.totalScore=e.result.totalsPercategory[t[0].evaluationSubSection.id],console.log("subsection"),console.log(t);var n=_.every(t,function(e){return angular.isUndefined(e.score)||null==e.score});n===!0&&(t.unScored=!0)}})}}t.$inject=["$http","configurationService","messageService","$filter"],e.service("evaluationService",t)}(angular.module("app.evaluation")),function(e){"use strict";function t(e,t){e.calenderPath="app/dashboard/views/partials/calendarPartial.html";var n=function(){};n()}t.$inject=["$scope","$location"],e.controller("dashboardController",t)}(angular.module("app.dashboard")),function(e){function t(e,t){var n=(t.baseApiPath,function(){});n()}t.$inject=["$http","configurationService"],e.service("dashboardService",t)}(angular.module("app.dashboard")),function(e){"use strict";function t(e,t){var n=function(){t.message="Welkom"};n()}t.$inject=["$http","$scope"],e.controller("homeController",t)}(angular.module("app.home")),function(e){"use strict";function t(e,t,n,o,a){e.open=function(t){e.status.opened=!0},e.setDate=function(t,n,o){e.createCommand.evaluationDate=new Date(t,n,o)},e.dateOptions={formatYear:"yy",startingDay:1},e.status={isopen:!1},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},e.selectedClass={},e.setClass=function(t){e.createCommand.classId=t.id,e.selectedClass=t},e.ok=function(){n.createEvaluationFromTemplate(e.createCommand).then(function(){t.dismiss("ok")})},e.cancel=function(){t.dismiss("cancel")};var l=function(){e.classesForCourse=a,e.createCommand={EvaluationTemplateId:o.id,EvaluationDate:void 0,classId:void 0}};l()}t.$inject=["$scope","$uibModalInstance","evaluationTemplateService","evaluationTemplate","classesForCourse"],e.controller("createEvaluationsFromTemplateModalController",t)}(angular.module("app.evaluationTemplate")),function(e){"use strict";function t(e,t,n,o,a){var l=this;e.evaluationTemplate={},e.evaluationTemplate.evaluationSubSections=[],e.tabs=1,e.saveTemplate=function(){n.createTemplate(e.evaluationTemplate).then(function(e){t.path("/evaluationTemplates")})},e.openGeneralOptions=function(){var t=a.open({animation:!0,templateUrl:"app/evaluationTemplate/views/generalEvaluationTemplateOptionsModal.html",controller:"generalEvaluationTemplateOptionsModalController",size:"lg",resolve:{createEvaluationOptions:function(){return e.createEvaluationOptions},generalOptions:function(){return{description:"",course:null}}}});t.result.then(function(t){e.evaluationTemplate.description=t.description,e.evaluationTemplate.course=t.course,l.calculateProgress()},function(){})},e.openSubSections=function(t){var n=a.open({animation:!0,templateUrl:"app/evaluationTemplate/views/evaluationTemplateSubSectionModal.html",controller:"evaluationTemplateSubSectionModalController",size:"lg",resolve:{course:function(){return e.evaluationTemplate.course},evaluationSubSections:function(){return e.evaluationTemplate.evaluationSubSections},subSection:function(){return t},currentTotalWeight:function(){return l.getTotalSubSectionPercentage()}}});n.result.then(function(t){e.evaluationTemplate.evaluationSubSections=t,l.calculateProgress()},function(){})},e.deleteSubSection=function(t){var n=e.evaluationTemplate.evaluationSubSections.indexOf(t);e.evaluationTemplate.evaluationSubSections.splice(n,1),l.calculateProgress()},e.openGoals=function(t){var n=a.open({animation:!0,templateUrl:"app/evaluationTemplate/views/evaluationTemplateGoalsModal.html",controller:"evaluationTemplateGoalsModalController",size:"lg",resolve:{course:function(){return e.evaluationTemplate.course},subSection:function(){return t},availableGoals:function(){var t=[];angular.forEach(e.evaluationTemplate.evaluationSubSections,function(e){angular.forEach(e.goals,function(e){t.push(e)})});var n;return n=t.length>0?_.reject(e.evaluationTemplate.course.goalsForCourse,function(e){var n=_.any(t,function(t){return e.id===t.id});return n}):e.evaluationTemplate.course.goalsForCourse}}});n.result.then(function(e){console.log("Doel toegevoegd"),l.calculateProgress()},function(){})},e.deleteGoal=function(e,t){var n=e.goals.indexOf(t);e.goals.splice(n,1)},l.getTotalSubSectionPercentage=function(){var t=0;return angular.forEach(e.evaluationTemplate.evaluationSubSections,function(e){t+=parseInt(e.weight,10)}),t},l.calcDescriptionPoints=function(){return angular.isDefined(e.evaluationTemplate.description)&&null!==e.evaluationTemplate.description&&""!==e.evaluationTemplate.description?25:0},l.calcCoursePoints=function(){return angular.isDefined(e.evaluationTemplate.course)&&null!==e.evaluationTemplate.course?25:0},l.calcSubTotalPoints=function(){if(angular.isDefined(e.evaluationTemplate.evaluationSubSections)){var t=l.getTotalSubSectionPercentage();return 100===t?25:0}return 0},l.calcGoalPoints=function(){if(angular.isDefined(e.evaluationTemplate.evaluationSubSections)){var t=_.any(e.evaluationTemplate.evaluationSubSections,function(e){return angular.isDefined(e.goals)&&e.goals.length>0});return t?25:0}return 0},l.calculateProgress=function(){e.totalProgress=0,e.totalProgress+=l.calcDescriptionPoints(),e.totalProgress+=l.calcCoursePoints(),e.totalProgress+=l.calcSubTotalPoints(),e.totalProgress+=l.calcGoalPoints()};var r=function(){e.createEvaluationOptions=o,e.totalProgress=0,e.openGeneralOptions()};r()}t.$inject=["$scope","$location","evaluationTemplateService","createEvaluationOptions","$uibModal"],e.controller("createEvaluationTemplateController",t)}(angular.module("app.evaluationTemplate")),function(e){"use strict";function t(e,t,n,o,a,l,r){e.selectedRow=null,e.setSelectedTemplate=function(t,n){e.selectedTemplate=t,e.selectedRow=n},e.createEvaluations=function(){o.open({animation:!0,templateUrl:"app/evaluationTemplate/views/createEvaluationsFromTemplateModal.html",controller:"createEvaluationsFromTemplateModalController",size:"lg",resolve:{evaluationTemplate:function(){return e.selectedTemplate},classesForCourse:function(){return a.classesForCourse(e.selectedTemplate.course.id).then(function(e){return e})}}})},e.hideSelectedTemplates=function(){console.log("test");var t=[];_.each(e.evaluationTemplates,function(e){e.checkHidden===!0&&t.push(e)}),t.length>0?l.hideSelectedTemplates(t).then(function(){_.each(t,function(e){e.hide=!0})}):r.handleWarning("Er werden geen sjablonen verborgen.","Geen selectie")};var c=function(){e.evaluationTemplates=n};c()}t.$inject=["$scope","$location","evaluationTemplates","$uibModal","classesService","evaluationTemplateService","messageService"],e.controller("evaluationTemplatesController",t)}(angular.module("app.evaluationTemplate")),function(e){"use strict";function t(e,t,n,o,a){var l=this;e.goalsFilter={},e.selectedRow=null,e.setSelectedGoal=function(t,n){e.selectedGoal=t,e.selectedRow=n},l.AddGoalToNewEvaluationSubSection=function(){(angular.isUndefined(n.goals)||e.evaluationSubSection.goals.length<1)&&(e.evaluationSubSection.goals=[]),e.evaluationSubSection.goals.push(e.selectedGoal)},e.ok=function(){angular.isUndefined(e.selectedGoal)||(l.AddGoalToNewEvaluationSubSection(),t.close(e.evaluationSubSection))},e.cancel=function(){t.dismiss("cancel")};var r=function(){e.evaluationSubSection=n,e.course=o,e.availableGoals=a};r()}t.$inject=["$scope","$uibModalInstance","subSection","course","availableGoals"],e.controller("evaluationTemplateGoalsModalController",t)}(angular.module("app.evaluationTemplate")),function(e){"use strict";function t(e,t,n,o,a,l){var r=this;r.addnewEvaluationSubSection=function(){e.evaluationSubSections.push(angular.copy(e.newEvaluationSubSection))},e.ok=function(){angular.isUndefined(e.newEvaluationSubSection.weight)||null===e.newEvaluationSubSection.weight||((angular.isUndefined(e.isEditing)||e.isEditing===!1)&&r.addnewEvaluationSubSection(),t.close(e.evaluationSubSections))},e.cancel=function(){t.dismiss("cancel")};var c=function(){e.evaluationSubSections=n,e.currentTotalWeight=o,e.course=a,angular.isDefined(l)&&null!==l&&(e.newEvaluationSubSection=l,e.isEditing=!0)};c()}t.$inject=["$scope","$uibModalInstance","evaluationSubSections","currentTotalWeight","course","subSection"],e.controller("evaluationTemplateSubSectionModalController",t)}(angular.module("app.evaluationTemplate")),function(e){"use strict";function t(e,t,n,o){e.selectedRow=null,e.ok=function(){angular.isUndefined(e.generalOptions.description)||null===e.generalOptions.description||""===e.generalOptions.description||angular.isUndefined(e.generalOptions.course)||null===e.generalOptions.course||t.close(e.generalOptions)},e.cancel=function(){t.dismiss("cancel");
},e.selectCourse=function(t,n){e.generalOptions.course=t,e.selectedRow=n};var a=function(){e.generalOptions=n,e.createEvaluationOptions=o};a()}t.$inject=["$scope","$uibModalInstance","generalOptions","createEvaluationOptions"],e.controller("generalEvaluationTemplateOptionsModalController",t)}(angular.module("app.evaluationTemplate")),function(e){function t(e,t){var n=this,o=t.baseApiPath;n.getCreateEvaluationOptions=function(){return e.get(o+"evaluationTemplate/getCreateEvaluationOptions").then(function(e){return e.data})},n.createTemplate=function(t){return e.post(o+"evaluationTemplate/createTemplate",t).then(function(e){return e.data})},n.getEvaluationTemplates=function(){return e.get(o+"evaluationTemplate/getEvaluationTemplates").then(function(e){return e.data})},n.createEvaluationFromTemplate=function(t){return e.post(o+"evaluationTemplate/createEvaluationFromTemplate",t).then(function(e){return e.data})},n.hideSelectedTemplates=function(t){return e.post(o+"evaluationTemplate/hideTemplates",t).then(function(e){return e.data})};var a=function(){};a()}t.$inject=["$http","configurationService"],e.service("evaluationTemplateService",t)}(angular.module("app.evaluationTemplate")),function(e){"use strict";function t(e,t,n,o){e.isCollapsed=!0,e.collapseMe=function(n){e.isCollapsed=!0,t.path(n)},e.logOut=function(){n.logOut()};var a=function(){var t=n.userName;angular.isDefined(t)&&""!==t&&(e.userName=t),e.isCollapsed=!0};o.$on("userLoggedIn",function(t,n){e.userName=n.userName}),o.$on("userLoggedOut",function(t,n){e.userName=void 0}),a()}t.$inject=["$scope","$location","authenticationService","$rootScope"],e.controller("indexController",t)}(angular.module("app.index")),function(e){function t(e,t){var n=(t.baseApiPath,function(){});n()}t.$inject=["$http","configurationService"],e.service("serviceName",t)}(angular.module("app.index")),function(e){"use strict";function t(e,t,n,o,a,l,r){var c=function(){t.errorMessage=void 0,t.userName=void 0,t.password=void 0,t.testTitle="TestTitle"};c();var s=function(){e.all([l.getFutureSchoolYears()]).then(function(e){r.futureSchoolYears=e[0],console.log(r.futureSchoolYears)})};t.login=function(){if(t.errorMessage=void 0,!angular.isUndefined(t.userName)&&!angular.isUndefined(t.password)){var e={userName:t.userName,password:t.password};o.login(e).then(function(e){s(),n.path("/home")})}}}t.$inject=["$q","$scope","$location","authenticationService","toastr","schoolyearService","$rootScope"],e.controller("loginController",t)}(angular.module("app.login")),app.factory("authInterceptorFactory",["$q","$location","localStorageService",function(e,t,n){var o={},a=function(e){e.headers=e.headers||{};var t=n.get("authorizationData");return t&&(e.headers.Authorization="Bearer "+t.token),e},l=function(n){return 401===n.status&&t.path("/login"),e.reject(n)};return o.request=a,o.responseError=l,o}]),function(e){"use strict";function t(e,t,n,o,a){var l=this;l.logOut=function(){t.remove("authorizationData"),l.isAuth=!1,l.userName="",a.$broadcast("userLoggedOut",{})},l.login=function(r){var c=o.defer(),s="grant_type=password&username="+r.userName+"&password="+r.password;return e.post(n.tokenPath,s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.set("authorizationData",{token:e.data.access_token,userName:r.userName,expires:e.data.expires_in}),l.userName=r.userName,l.isAuth=!0,a.$broadcast("userLoggedIn",{userName:l.userName}),c.resolve(e)}),c.promise},l.getAuthData=function(){var e=t.get("authorizationData");e&&(l.isAuth=!0,l.userName=e.userName)}}t.$inject=["$http","localStorageService","configurationService","$q","$rootScope"],e.service("authenticationService",t)}(angular.module("app.login")),function(e){"use strict";function t(e){function t(t){500===t.status&&e.error(t.data.exceptionMessage,"Fout")}function n(t,n){e.success(t,n)}function o(t,n){e.warning(t,n)}function a(t,n){e.error(t,n)}var l=this;l.handleReject=t,l.handleSucces=n,l.handleWarning=o,l.handleError=a}t.$inject=["toastr"],e.service("messageService",t)}(angular.module("app")),function(e){"use strict";function t(e,t){var n=this,o=t.baseApiPath;n.getSchoolYears=function(){return e.get(o+"generalInfo/getschoolyears").then(function(e){return e.data})},n.getFutureSchoolYears=function(){return n.getSchoolYears().then(function(e){var t=(new Date).getFullYear(),n=(new Date).getMonth();return 8>n&&(t-=1),_.filter(e,function(e){return e.startYear>=t})})}}t.$inject=["$http","configurationService"],e.service("schoolyearService",t)}(angular.module("app.schoolyear")),function(e){"use strict";function t(e,t){e.test="Hello world";var n=function(){};n()}t.$inject=["$scope","$location"],e.controller("createStudentController",t)}(angular.module("app.student")),function(e){function t(e,t){var n=(t.baseApiPath,function(){});n()}t.$inject=["$http","configurationService"],e.service("studentService",t)}(angular.module("app.student")),function(e){"use strict";function t(e,t){var n=function(){};n()}t.$inject=["$scope","$location"],e.controller("manageStudyPlanController",t)}(angular.module("app.studyPlan")),function(e){"use strict";function t(e,t,n,o){e.selectedRow=null,e.setSelectedStudyplan=function(t,n){e.selectedStudyplan=t,e.selectedRow=n},e.ok=function(){n.close(e.selectedStudyplan)},e.cancel=function(){n.dismiss("cancel")};var a=function(){e.studyplans=o,console.log(o)};a()}t.$inject=["$scope","$location","$uibModalInstance","studyplans"],e.controller("selectStudyPlanModalController",t)}(angular.module("app.studyPlan")),function(e){function t(e,t){var n=this,o=t.baseApiPath;n.getStudyPlans=function(){return e.get(o+"/studyPlans/allStudyPlans").then(function(e){return e.data})}}t.$inject=["$http","configurationService"],e.service("studyPlanService",t)}(angular.module("app.studyPlan")),function(e){"use strict";function t(e,t,n,o,a){e.selectedRow=null,e.setSelectedCourse=function(t,n){e.selectedCourse=t,e.selectedRow=n},e.ok=function(){if(!angular.isUndefined(e.selectedCourse)){var a={};a.teacherId=o.id,a.courseId=e.selectedCourse.id,n.addCourse(a).then(function(e){t.close()})}},e.cancel=function(){t.dismiss("cancel")};var l=function(){e.courses=a,e.teacher=o,console.log(o),console.log(a)};l()}t.$inject=["$scope","$uibModalInstance","teacherService","teacher","courses"],e.controller("addCourseModalController",t)}(angular.module("app.teacher")),function(e){"use strict";function t(e,t,n,o,a){e.selectedRow=null,e.setSelectedTeacher=function(t,n){e.selectedTeacher=t,e.selectedRow=n},e.openCoursesModal=function(){o.open({animation:!0,templateUrl:"app/Teacher/views/addCourseModal.html",controller:"addCourseModalController",size:"lg",resolve:{teacher:function(){return e.selectedTeacher},courses:["courseService",function(e){return e.allCourses().then(function(e){return e})}]}})},e.openClassModal=function(){var t=o.open({animation:!0,templateUrl:"app/classes/views/selectClassesModal.html",controller:"selectClassModalController",size:"lg",resolve:{classes:["classesService",function(t){return t.availableClassesForTeacher(e.selectedTeacher.id).then(function(e){return e})}]}});t.result.then(function(t){var o={};o.teacherId=e.selectedTeacher.id,o.classId=t.id,n.addClass(o).then(function(e){},function(){})},function(){})};var l=function(){e.teachers=a,console.log(e.teachers)};l()}t.$inject=["$scope","$location","teacherService","$uibModal","teachers"],e.controller("manageTeacherController",t)}(angular.module("app.teacher")),function(e){function t(e,t){var n=this,o=t.baseApiPath;n.getAccounts=function(){return e.get(o+"accounts/getAccounts").then(function(e){return e.data})},n.addCourse=function(t){return e.post(o+"/teacher/addCourse",t).then(function(e){return e.data})},n.getTeachers=function(){return e.get(o+"/teacher/teachers").then(function(e){return e.data})},n.addClass=function(t){return e.post(o+"/teacher/addClass",t).then(function(e){return e.data})}}t.$inject=["$http","configurationService"],e.service("teacherService",t)}(angular.module("app.teacher")),function(e){"use strict";function t(e,t,n,o,a){e.selectedRow=null,e.setSelectedItem=function(t,n){e.selectedItem=t,e.selectedRow=n},e.ok=function(){return angular.isUndefined(e.selectedItem)?void n.info("Selecteer een item uit de lijst om verder te kunnen gaan."):void t.close(e.selectedItem)},e.cancel=function(){t.dismiss("cancel")};var l=function(){e.items=o,e.content=a,console.log("selectItemModal's items:"),console.log(e.items)};l()}t.$inject=["$scope","$uibModalInstance","toastr","items","content"],e.controller("selectItemModalController",t)}(angular.module("app.customDirectives")),function(e){"use strict";function t(e,t,n,o,a){e.itemFilter={},e.items=[];var l=function(){return _.filter(e.items,function(e){return e.selected===!0?e:void 0})};e.checkAll=function(){e.selectedAll?e.selectedAll=!0:e.selectedAll=!1,angular.forEach(e.items,function(t){t.selected=e.selectedAll})},e.clearFilter=function(){for(var t=Object.keys(e.itemFilter),n=0;n<t.length;n++)e.itemFilter[t[n]]=void 0},e.clearSelected=function(){_.each(e.items,function(e){e.selected=!1})},e.clearSelectedFilter=function(){return e.itemFilter.selected===!1?void(e.itemFilter.selected=void 0):(e.clearFilter(),void(e.itemFilter.selected=!0))},e.ok=function(){var e=l();return angular.isUndefined(e)||e.length<1?void n.info("Selecteer minstens één item uit de lijst om verder te kunnen gaan."):void t.close(e)},e.cancel=function(){t.dismiss("cancel")};var r=function(){e.items=o,e.content=a};r()}t.$inject=["$scope","$uibModalInstance","toastr","items","content"],e.controller("selectItemsModalController",t)}(angular.module("app.customDirectives")),function(e){"use strict";function t(e,t,n){e.selectedRow=null,e.setSelectedEvaluation=function(t,n){e.selectedEvaluation=t,e.selectedRow=n},e.startEvaluation=function(){t.path("/evaluation/"+e.selectedEvaluation.bundleId)};var o=function(){n.plannedEvaluations().then(function(t){e.plannedEvaluations=t})};o()}t.$inject=["$scope","$location","evaluationService"],e.controller("calendarController",t)}(angular.module("app.dashboard"));